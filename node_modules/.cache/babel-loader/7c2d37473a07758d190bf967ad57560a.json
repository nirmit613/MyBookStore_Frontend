{"ast":null,"code":"var _jsxFileName = \"E:\\\\7th Semester\\\\Internship2\\\\TatvaSoft\\\\MyBookStore_Tatvasoft\\\\src\\\\context\\\\cart.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport React from \"react\";\nimport cartService from \"../service/cart.service\";\nimport { useAuthContext } from \"./auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  cartData: {\n    records: [],\n    totalRecords: 0\n  },\n  updateCart: () => {},\n  emptyCart: () => {}\n};\nexport const CartContext = /*#__PURE__*/createContext(initialState);\nexport const CartWrapper = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const authContext = useAuthContext();\n  const [cartData, setCartData] = useState({\n    totalRecords: 0,\n    records: []\n  });\n  useEffect(() => {\n    updateCart();\n  }, [authContext.user.id]);\n\n  const updateCart = () => {\n    if (authContext.user.id) {\n      cartService.getList(authContext.user.id).then(res => setCartData(res));\n    }\n  };\n\n  const emptyCart = () => {\n    setCartData({\n      totalRecords: 0,\n      records: []\n    });\n  };\n\n  let value = {\n    cartData,\n    updateCart,\n    emptyCart\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CartWrapper, \"OeCFxwMN4W1mVtdwEhcwdgoFiG0=\", false, function () {\n  return [useAuthContext];\n});\n\n_c = CartWrapper;\nexport const useCartContext = () => {\n  _s2();\n\n  return useContext(CartContext);\n};\n\n_s2(useCartContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"CartWrapper\");","map":{"version":3,"sources":["E:/7th Semester/Internship2/TatvaSoft/MyBookStore_Tatvasoft/src/context/cart.tsx"],"names":["createContext","useContext","useEffect","useState","React","cartService","useAuthContext","initialState","cartData","records","totalRecords","updateCart","emptyCart","CartContext","CartWrapper","children","authContext","setCartData","user","id","getList","then","res","value","useCartContext"],"mappings":";;;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,EAAoCC,SAApC,EAA+CC,QAA/C,QAA+D,OAA/D;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAOA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,SAA2BC,cAA3B,QAAiD,QAAjD;;AAQA,MAAMC,YAA8B,GAAG;AACtCC,EAAAA,QAAQ,EAAE;AACTC,IAAAA,OAAO,EAAE,EADA;AAETC,IAAAA,YAAY,EAAE;AAFL,GAD4B;AAKtCC,EAAAA,UAAU,EAAE,MAAM,CAAE,CALkB;AAMtCC,EAAAA,SAAS,EAAE,MAAM,CAAE;AANmB,CAAvC;AASA,OAAO,MAAMC,WAAW,gBAAGb,aAAa,CAACO,YAAD,CAAjC;AAEP,OAAO,MAAMO,WAAkD,GAAG,QAE/B;AAAA;;AAAA,MAFgC;AAClEC,IAAAA;AADkE,GAEhC;AAClC,QAAMC,WAA6B,GAAGV,cAAc,EAApD;AAEA,QAAM,CAACE,QAAD,EAAWS,WAAX,IAA0Bd,QAAQ,CAAU;AACjDO,IAAAA,YAAY,EAAE,CADmC;AAEjDD,IAAAA,OAAO,EAAE;AAFwC,GAAV,CAAxC;AAIAP,EAAAA,SAAS,CAAC,MAAM;AACfS,IAAAA,UAAU;AACV,GAFQ,EAEN,CAACK,WAAW,CAACE,IAAZ,CAAiBC,EAAlB,CAFM,CAAT;;AAIA,QAAMR,UAAU,GAAG,MAAM;AACxB,QAAIK,WAAW,CAACE,IAAZ,CAAiBC,EAArB,EAAyB;AACxBd,MAAAA,WAAW,CAACe,OAAZ,CAAoBJ,WAAW,CAACE,IAAZ,CAAiBC,EAArC,EAAyCE,IAAzC,CAA+CC,GAAD,IAASL,WAAW,CAACK,GAAD,CAAlE;AACA;AACD,GAJD;;AAKA,QAAMV,SAAS,GAAG,MAAM;AACvBK,IAAAA,WAAW,CAAC;AACXP,MAAAA,YAAY,EAAE,CADH;AAEXD,MAAAA,OAAO,EAAE;AAFE,KAAD,CAAX;AAIA,GALD;;AAMA,MAAIc,KAAK,GAAG;AACXf,IAAAA,QADW;AAEXG,IAAAA,UAFW;AAGXC,IAAAA;AAHW,GAAZ;AAKA,sBAAO,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEW,KAA7B;AAAA,cAAqCR;AAArC;AAAA;AAAA;AAAA;AAAA,UAAP;AACA,CA9BM;;GAAMD,W;UAG0BR,c;;;KAH1BQ,W;AAgCb,OAAO,MAAMU,cAAc,GAAG,MAAM;AAAA;;AACnC,SAAOvB,UAAU,CAACY,WAAD,CAAjB;AACA,CAFM;;IAAMW,c","sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\r\nimport React from \"react\";\r\nimport Shared from \"../utils/shared\";\r\nimport { RoutePaths } from \"../utils/enum\";\r\nimport UserModel from \"../models/UserModel\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { CartList, GetCart } from \"../models/CartModel\";\r\nimport cartService from \"../service/cart.service\";\r\nimport { AuthContextModel, useAuthContext } from \"./auth\";\r\n\r\nexport interface CartContextModel {\r\n\tcartData: GetCart;\r\n\tupdateCart: () => void;\r\n\temptyCart: () => void;\r\n}\r\n\r\nconst initialState: CartContextModel = {\r\n\tcartData: {\r\n\t\trecords: [],\r\n\t\ttotalRecords: 0,\r\n\t},\r\n\tupdateCart: () => {},\r\n\temptyCart: () => {},\r\n};\r\n\r\nexport const CartContext = createContext(initialState);\r\n\r\nexport const CartWrapper: React.FC<React.PropsWithChildren<{}>> = ({\r\n\tchildren,\r\n}: React.PropsWithChildren<{}>) => {\r\n\tconst authContext: AuthContextModel = useAuthContext();\r\n\r\n\tconst [cartData, setCartData] = useState<GetCart>({\r\n\t\ttotalRecords: 0,\r\n\t\trecords: [],\r\n\t});\r\n\tuseEffect(() => {\r\n\t\tupdateCart();\r\n\t}, [authContext.user.id]);\r\n\r\n\tconst updateCart = () => {\r\n\t\tif (authContext.user.id) {\r\n\t\t\tcartService.getList(authContext.user.id).then((res) => setCartData(res));\r\n\t\t}\r\n\t};\r\n\tconst emptyCart = () => {\r\n\t\tsetCartData({\r\n\t\t\ttotalRecords: 0,\r\n\t\t\trecords: [],\r\n\t\t});\r\n\t};\r\n\tlet value = {\r\n\t\tcartData,\r\n\t\tupdateCart,\r\n\t\temptyCart,\r\n\t};\r\n\treturn <CartContext.Provider value={value}>{children}</CartContext.Provider>;\r\n};\r\n\r\nexport const useCartContext = () => {\r\n\treturn useContext(CartContext);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}